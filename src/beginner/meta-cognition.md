# 元認知 (Meta-cognition)

**元認知 (Metacognition)**：指「思考自己的思考過程」的高階認知能力。對 AI 代理而言，這意味著能夠基於自我意識和過去經驗來評估和調整其行動。

**目標**：讓 AI 系統意識到自身的內部流程，並能監控、調節和適應其行為，從而做出更好的決策、識別錯誤並隨時間提高效能。

## 元認知的重要性 (Importance of Metacognition)

**提升 AI 代理能力**：
*   **自我反思 (Self-Reflection)**：評估自身表現，找出改進空間。
*   **適應性 (Adaptability)**：根據過去經驗和變化的環境修改策略。
*   **錯誤修正 (Error Correction)**：自主偵測並修正錯誤，提高結果準確性。
*   **資源管理 (Resource Management)**：透過規劃和評估行動來優化資源使用（如時間、算力）。

**解決 AI 挑戰**：有助於提高 AI 的透明度（解釋推理）、推理能力、適應性和感知準確性。

**真實元認知的表現**：AI 不僅調整最終建議，更能明確地反思其 *推理過程* 本身。
> AI 意識到「因為上次過度依賴使用者偏好而犯錯，所以要修改決策 *策略*」、「發現使用者提到『太擁擠』時，不僅要移除景點，還要反思自己以『受歡迎程度』排名的方法有缺陷」。

## AI 代理的基本組成 (Components of an AI Agent)

* **角色 (Persona)**：代理的個性和特徵，定義其互動方式。
* **工具 (Tools)**：代理能執行的能力和功能。
* **技能 (Skills)**：代理擁有的知識和專業技能。

這些組件共同構成一個能執行特定任務的「專業單元」。

### 代理中的規劃 (Planning in Agents)

**定義**：規劃是 AI 代理行為的關鍵部分，涉及為達成目標而規劃步驟，同時考慮當前狀態、資源和潛在障礙。

**要素**：
* 明確當前任務。
* 將任務分解為可管理步驟。
* 識別所需資源。
* 利用過去經驗指導規劃。

**範例（旅行代理）**：詳細列出了從收集偏好、檢索資訊、生成建議、獲取反饋、調整、確認、預訂到提供支援的完整步驟。

## 修正性 RAG 系統 (Corrective RAG System)

**RAG vs. 預先載入上下文 (Pre-emptive Context Load)**：
* **RAG (Retrieval-Augmented Generation)**：在處理查詢 *時*，檢索系統從外部來源獲取相關資訊，增強生成模型的輸入，以產生更準確、更相關的回應。
* **預先載入上下文**：在處理查詢 *前*，將相關背景資訊載入模型，使其一開始就擁有這些資訊，無需在過程中額外檢索。

**修正性 RAG (Corrective RAG Approach)**：
* **目標**：利用 RAG 技術來 *修正錯誤* 並提高 AI 代理的準確性。
* **組成**：
    * **提示技巧 (Prompting Technique)**：使用特定提示引導代理檢索相關資訊。
    * **工具 (Tool)**：實現演算法和機制，使代理能評估檢索資訊的相關性並生成準確回應。
    * **評估 (Evaluation)**：持續評估代理表現，並進行調整以提高準確性和效率。
* **範例（旅行代理中的修正性 RAG）**：展示如何根據使用者反饋（例如，不喜歡擁擠的艾菲爾鐵塔）來：
    1. **調整提示/查詢** (Prompting Technique)：將「避免艾菲爾鐵塔」加入偏好。
    2. **使用工具過濾/排序** (Tool)：重新檢索景點，並根據更新後的偏好生成新行程。
    3. **評估與調整** (Evaluation)：將反饋存儲起來，用於持續調整偏好模型和未來建議。

## 規劃與迭代優化

**以目標引導計劃 (Bootstrapping the Plan with a Goal)**：
* 從明確的目標開始（例如，最大化客戶滿意度）。
* 基於初始目標和限制（如預算、偏好）創建一個初步計劃。
* 透過迭代不斷完善計劃，使其更接近目標。

**利用 LLM 進行重排序和評分 (Taking Advantage of LLM for Re-ranking and Scoring)**：
* 在初步檢索後，使用大型語言模型 (LLM) 評估候選項的相關性和品質。
* LLM 根據評估結果對候選項進行 **重排序 (Re-ranking)** 並 **評分 (Scoring)**。
* 確保最相關、最高品質的資訊優先呈現給使用者。
    > 旅行代理使用 OpenAI 服務，根據使用者偏好（如「觀光」、「多元文化」）對目的地列表進行重排序和評分，提供更精準的推薦。

## RAG：作為提示技巧 vs. 工具 (RAG: Prompting Technique vs Tool)

**作為提示技巧**：指如何 *設計和構建查詢* (prompts)，以有效引導模型從知識庫中檢索所需資訊。

**作為工具**：指實現 RAG 功能的 *底層系統、演算法或機制*，它根據提示執行實際的資訊檢索和整合生成。
