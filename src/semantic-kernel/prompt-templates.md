# 提示詞模板 (Prompt Templates)

在 Semantic Kernel 這個強大的 AI 框架中，**提示詞模板 (Prompt Templates)** 扮演著至關重要的角色。它們是您用來精心構建與大型語言模型 (LLM) 溝通指令的藍圖，確保 AI 能夠準確理解您的意圖，並生成高質量的回應。

## 什麼是提示詞模板？

想像一下，您在寫一封信，但有些部分需要根據收信人或特定情況來填寫。**提示詞模板** 就類似於這樣一個帶有「填空」的信件範本。

它是一個預先定義好的文本結構，通常包含：

1.  **固定文本 (Fixed Text)：** 這是您希望 AI 每次都看到的指令、背景資訊、問題框架或期望的輸出格式。
2.  **佔位符 (Placeholders)：** 這些是模板中用特殊符號標記出來的部分，最常見的是雙大括號 `{{變數名稱}}`。在實際運行時，Semantic Kernel 會將這些佔位符替換為動態的、具體的資訊，例如使用者的即時輸入、先前步驟的結果，或程式中提供的任何相關數據。

當固定文本與被填充了具體內容的佔位符結合後，就形成了一個完整且針對當前情境的「提示 (Prompt)」。這個完整的提示會被發送給 AI 模型，指導其完成特定任務。

## 提示詞模板為何如此重要？

雖然您可以直接向 AI 發送簡單的文本指令，但使用提示詞模板能帶來許多顯著的優勢，對於打造高品質、可控且可預測的 AI 應用至關重要：

1.  **結構化 AI 的輸入 (Structuring AI's Input)：**
    模板提供了一種標準化、有條理的方式來組織發送給 AI 的資訊。這有助於 AI 更清晰、更準確地理解任務要求和上下文環境，避免因指令模糊而導致的誤解。

2.  **有效整合多樣化資訊 (Combining Context, Instructions, User Input, and Function Outputs)：**
    提示詞模板是融合各種資訊片段的利器。您可以在一個模板中巧妙地編排：
    *   **明確指令 (Instructions)：** 將以下文字摘要為三個重點。
    *   **上下文資訊 (Context)：** 先前的對話歷史、使用者的個人偏好設定。
    *   **使用者即時輸入 (User Input)：** 使用者在聊天視窗中提出的問題。
    *   **其他函數的輸出 (Function Outputs)：** 從資料庫查詢到的產品資訊，可以作為生成產品描述的提示模板的輸入。

3.  **提升 AI 回應品質 (Achieving High-Quality AI Responses)：**
    提示的設計品質直接影響 AI 回應的準確性、相關性、風格和深度。一個精心設計的提示詞模板能夠有效地引導 AI 產生您期望的結果，減少不相關或低品質的輸出。

4.  **一致性與可重用性 (Consistency and Reusability)：**
    一旦您為某個特定任務創建了一個有效的提示詞模板，就可以在應用程式的不同部分或不同情境下重複使用它。這確保了 AI 在處理相似請求時能保持行為的一致性，同時也簡化了 AI 應用的開發和維護。

## 在 Semantic Kernel 中使用提示詞模板

Semantic Kernel 讓定義和使用提示詞模板變得非常直觀。常見的做法是：

1.  將您的提示詞模板定義為一個包含佔位符的字串。
2.  將這個模板註冊到 Kernel 中，使其成為一個可供 AI 或您的應用程式程式碼調用的「函數 (Function)」。這個函數通常會被歸類到某個「插件 (Plugin)」之下，以便更好地組織管理。

一旦註冊，這個基於提示詞的函數就可以：

*   **直接在聊天完成流程中使用：** 您的應用程式可以直接調用這個函數，傳入必要的參數來填充模板中的佔位符，然後將生成的完整提示發送給 AI 模型。
*   **作為插件函數供 AI 選擇：** 如果您為這個提示詞函數提供了清晰的描述，Semantic Kernel 的規劃器 (Planner) 或 AI 本身就能夠理解它的功能，並在需要時自動選擇調用它來完成更複雜的任務。

### 範例：創建並註冊一個簡單的問候語提示模板

```python
# 假設 'kernel' 是一個已經初始化並配置好 AI 服務的 Semantic Kernel 實例。
# import semantic_kernel as sk
# kernel = sk.Kernel()
# ... (此處省略 kernel 初始化及 AI 服務配置的相關程式碼) ...

# 1. 定義您的提示詞模板字串
#    `{{user_input}}` 是一個佔位符。
#    當這個提示被使用時，`{{user_input}}` 會被替換成使用者實際輸入的內容。
prompt_template_string = """
你好，{{user_input}}！請問有什麼我可以幫您的？
"""

# 2. 將提示詞模板作為一個「函數」添加到 Kernel 中
#    這樣做能讓 Kernel 和 AI 知道這個提示的存在，並能夠調用它。
#    這個函數會被歸類在名為 "Greeting" 的插件下，函數名為 "greet"。
greeting_prompt_function = kernel.add_function(
    plugin_name="Greeting",              # 指定此函數隸屬於的插件名稱。
    function_name="greet",               # 為這個基於提示的函數命名。
    prompt=prompt_template_string,       # 傳遞我們定義的提示詞模板字串。
    description="生成一個友好的問候語，並將使用者的輸入包含在問候中。" # (非常推薦) 提供描述，幫助 AI 理解此函數的用途。
)

```

## 有效提示設計的簡要訣竅

設計出色的提示詞模板是提升 AI 應用效能的關鍵：

*   **明確性 (Clarity)：** 您的指令和期望應該清晰無誤。避免使用模糊或有多重解釋的詞語。
*   **提供上下文 (Context is King)：** 確保 AI 擁有足夠的背景資訊來理解任務。
*   **給予範例 (Few-shot Learning)：** 在提示中提供一兩個期望的輸入/輸出範例，能極大地幫助 AI 理解您的模式和要求。
*   **迭代與測試 (Iterate and Test)：** 設計提示是一個不斷嘗試和優化的過程。觀察 AI 的回應，並根據結果調整您的模板。
